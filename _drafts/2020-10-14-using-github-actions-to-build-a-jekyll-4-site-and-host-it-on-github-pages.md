---
title: Using Github Actions to build a Jekyll 4 site and host it on Github Pages
---

A while back I decided that I was going to move this site from an older [Lektor](https://www.getlektor.com/) setup to [Jekyll](https://jekyllrb.com/) while retaining my Github Pages hosting setup. The reasons behind the move are little more than personal preference, but I had hoped to at least rid myself of Travis CI after being unhappy with Idera's acquisition of it. I initially planned on taking advantage of the automatic building and hosting of a [Jekyll site on Github Pages](https://docs.github.com/en/free-pro-team@latest/github/working-with-github-pages/setting-up-a-github-pages-site-with-jekyll), however after seeing that I wouldn't be able to have custom build steps such as using PostCSS for a custom theme and being locked into [Jekyll 3](https://pages.github.com/versions/), I had to find my own way for building and deploying the site. Thankfully that's a really easy task now as a result of Github Actions which let me both ditch Travis CI and not have to worry about getting another CI runner authorized to push to the repo.

A lot of my setup follows the footsteps of [David Stosik's setup](https://davidstosik.github.io/2020/05/31/static-blog-jekyll-410-github-pages-actions.html), so be sure to give that a read. Additionally, I'm actively modeling my photography page setup after [Brandur's](https://brandur.org/photos) setup and his documentation around how his [site handles them](https://github.com/brandur/sorg/blob/81eb0a6bdfa891156c7124984306488093cdc6f7/docs/photographs.md).

### Github Actions
One of the beautys of Github Actions is it's integration with the repository, you can clone, commit and push all out of the box without going through any extra setup. I'll skip over the general file setup for a workflow, but as you can see in [mine](https://github.com/JoshAshby/joshashby.github.io/blob/source/.github/workflows/github-pages.yml) I've got it running only on pushes to the branch `source` and using the github supplied `ubuntu-latest` runner (more info on the available runners [here](https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-syntax-for-github-actions#jobsjob_idruns-on)).

Before we get to far though we've got to make a decision on how we want to build and commit the updates as that'll affect how we setup our workflow. here are a [two different ways](https://docs.github.com/en/free-pro-team@latest/github/working-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site) Github Pages can currently host a site, either from the root `/` of a specific branch or from the `/docs` folder of a banch. Why does this matter to us though? If we choose to host from `/docs` we could in theory keep our branch count down to one because we could have Jekyll build to `/docs` instead of it's standard `_site`. This gives us the ability to have other non hosted content, or even our sites source in the same branch, although I can't think of a worthy usecase for the former and the latter comes with the downside of a second commit showing up on the authoring branch which could get annoying quickly.
