<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="apple-mobile-web-app-status-bar-style" content="#1f2937">
  <meta name="theme-color" content="#1f2937" />

  <title>SpiderMite-lang - Ashby's Hideout</title>
  <meta name="description" content="">

  <link type="application/atom+xml" rel="alternate" href="https://joshisa.ninja/feed.xml" title="Ashby&apos;s Hideout" />
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>SpiderMite-lang | Ashby’s Hideout</title>
<meta name="generator" content="Jekyll v4.2.2" />
<meta property="og:title" content="SpiderMite-lang" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="I’ve always been interested in language implementations, and have built a number of small interpreters of various types and styles, following along with books such as the fantastic Robert Nystrom’s Crafting Interpreters and Andrew Appels’s Modern Compiler Implementation in ML." />
<meta property="og:description" content="I’ve always been interested in language implementations, and have built a number of small interpreters of various types and styles, following along with books such as the fantastic Robert Nystrom’s Crafting Interpreters and Andrew Appels’s Modern Compiler Implementation in ML." />
<link rel="canonical" href="https://joshisa.ninja/projects/spidermite" />
<meta property="og:url" content="https://joshisa.ninja/projects/spidermite" />
<meta property="og:site_name" content="Ashby’s Hideout" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-01-03T00:09:24+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="SpiderMite-lang" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-01-03T00:09:24+00:00","datePublished":"2024-01-03T00:09:24+00:00","description":"I’ve always been interested in language implementations, and have built a number of small interpreters of various types and styles, following along with books such as the fantastic Robert Nystrom’s Crafting Interpreters and Andrew Appels’s Modern Compiler Implementation in ML.","headline":"SpiderMite-lang","mainEntityOfPage":{"@type":"WebPage","@id":"https://joshisa.ninja/projects/spidermite"},"url":"https://joshisa.ninja/projects/spidermite"}</script>
<!-- End Jekyll SEO tag -->


  <link rel="stylesheet" href="/vite/assets/ashby.c039ba63.css" media="screen"/>

  <style>
  
  </style>
</head>

<body>
  <div id="master-chief">
    <section id="main-sidebar">
      <nav class="sidebar-nav">
        <h2><a href="/">Ashby's Hideout</a></h2>

        <div id="nav-links" class="expandable">
          <ul class="nav-list">
            <li class="nav-item"><a href="/posts/">Posts</a></li>
            <li class="nav-item"><a href="/photos/">Photos</a></li>
            <li class="nav-item"><a href="/projects/">Projects</a></li>
            <li class="nav-item"><a href="/resume/">Resume</a></li>

            
          </ul>
        </div>

        <div class="hamburger-bun">
          <button class="nav-item" data-behavior="toggle-hidden" data-target="#nav-links">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
          </button>
        </div>
      </nav>
    </section>

    <main>
      <div class="not-prose mb-2">
  <div class="relative group">
    

    <div class="mt-4 flex items-center justify-between text-base font-medium space-x-8">
      <h3>SpiderMite-lang</h3>

      

      <div class="flex items-center divide-solid divide-x-2 divide-gray-300">
        
          <a href="https://bones.isin.space/user/JoshAshby/repository/SpiderMite-lang" class="px-2">Fossil Repository
</a>
        
      </div>
    </div>

    
      <span class="tag">Programming Language</span>
    
  </div>
</div>

<strong>TL;DR:</strong> SpiderMite-lang is a multi-pass programming language implementation that I’ve been using to explore the ideas of how to implement type-checking and pattern matching.



<p>I’ve always been interested in language implementations, and have built a
number of small interpreters of various types and styles, following along with
books such as the fantastic <a href="https://journal.stuffwithstuff.com/">Robert
Nystrom’s</a> <em><a href="https://craftinginterpreters.com/">Crafting
Interpreters</a></em> and <a href="https://www.cs.princeton.edu/~appel/">Andrew
Appels’s</a> <em><a href="https://www.cs.princeton.edu/~appel/modern/ml/">Modern Compiler
Implementation in ML</a></em>.</p>

<p>SpiderMite-lang is the next link in this long chain of learning and discovery,
with a focus around more advanced techniques and compiler functionality that
isn’t covered well (or at all) in books. It’s also one of my first few
“unguided” language implementations, everything has been designed and built
without following along with books or existing tutorials and as such it’s
proven quite valuable from the lessons learned as the language has evolved.</p>

<p>The goal with this language is to implement a small ML/Ruby/Swift like language
that has type-checking and pattern matching. Since I want to focus on more
advanced passes within the compiler, the implementation uses a classic but
simple hand written recursive-descent parser and has a basic “reference”
tree-walking interpreter. These choices, while not ground breaking or
interesting, lend themselves to a lot of quick flexibility when it comes to
trying out new ideas around the type system and pattern matching.</p>

<p>Here’s a “kitchen sink” example of some SpiderMite code, as it appears in winter of 2023:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>external def print(_ _: Any) -&gt; Nil
external def toString(_ _: Any) -&gt; String

let b = 1
let c = 41

def matchThings(a: Number) -&gt; String do
    let d = 0

    loop do
        match d with
        | 10 do
            print(10 * 3 + 7)
            break toString(b + c) # "never" type for this branch, `loop` infers to type `String`
        | i do
            print(i)
            d = i + a # value of the match expression isn't captured, it's okay that the branch doesn't align in types with the loop or the other branch
        end
    end
end

print(matchThings(a: 1))
</code></pre></div></div>

<h2 id="technology">Technology</h2>
<ul>
  <li>Swift 5.9</li>
</ul>


    </main>
  </div>

  <footer class="border-t-2 border-sky-900 my-4 pt-4 text-sm w-full flex justify-center">
    <p class="prose text-xs dark:prose-invert mx-4">
      Found an error or have an improvement?
      <a href="https://github.com/JoshAshby/joshashby.github.io/tree/source/_projects/spidermite.md">Suggest a correction!</a> | <span class="text-gray-300 text-xs">© Joshua Ashby</span>
    </p>
  </footer>

  
  <script src="/vite/assets/application.2826b514.js" crossorigin="anonymous" type="module"></script>


</body>
</html>
